<center>
  <svg x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve" width="100" style="display: inline">
  <g>
    <g>
      <path d="M511.955,286.874c-0.105-1.016-2.7-25.204-12.317-52.426c-13.125-37.155-32.331-61.1-57.091-71.22
        c-6.982-11.746-19.905-26.735-42.528-33.804c-4.334-1.352-8.954,1.03-10.359,5.349c-0.112,0.343-1.018,3.207-1.924,7.962
        c-2.561-1.107-5.646-2.25-9.28-3.282c-14.842-4.213-31.946-4.818-50.867-1.808c-10.161-3.685-54.353-18.796-114.81-26.229
        c-60.724-7.467-113.65,11.203-157.312,55.488c-34.232,34.722-31.745,72.52-29.746,102.893c0.421,6.397,0.818,12.438,0.818,17.937
        c0,28.563-24.868,65.759-25.117,66.128c-1.981,2.929-1.885,6.793,0.236,9.622l19.881,26.508
        c5.727,7.637,14.846,12.196,24.392,12.196h15.442c4.58,0,8.294-3.713,8.294-8.294c0-4.58-3.713-8.294-8.294-8.294h-7.74
        c7.939-6.62,19.31-16.614,31.353-28.887c5.62-5.727,10.839-11.386,15.656-16.97c3.134,17.624,4.543,35.716,5.145,46.279
        c0.518,9.065,8.053,16.165,17.154,16.165h44.592c4.58,0,8.294-3.713,8.294-8.294c0-4.58-3.713-8.294-8.294-8.294h-14.401
        c10.668-29.442,13.199-53.663,13.717-60.291c4.919,0.337,9.789,0.5,14.566,0.5c29.249,0,55.054-5.711,67.931-9.651
        c6.651,26.788,31.456,75.313,34.67,81.54c1.423,2.758,4.266,4.49,7.37,4.49h44.233c4.58,0,8.294-3.713,8.294-8.294
        c0-4.58-3.713-8.294-8.294-8.294h-13.708c5.2-11.833,13.285-31.023,20.129-50.697c1.453-0.257,3.574-0.697,6.183-1.402
        c17.603,37.316,51.382,65.543,52.883,66.783c1.486,1.23,3.356,1.902,5.285,1.902h35.387c4.58,0,8.294-3.713,8.294-8.294
        c0-4.58-3.713-8.294-8.294-8.294h-13.374c-5.699-9.391-9.974-26.826-12.15-49.894c-1.004-10.64-1.391-20.598-1.53-27.784
        c4.913,2.584,10.469,4.545,16.746,5.67c18.984,3.4,32.346,5.618,40.212,6.878c1.511,0.242,3.02,0.36,4.521,0.36
        c9.501,0,18.567-4.74,23.938-12.796l10.466-15.698C511.679,290.726,512.155,288.796,511.955,286.874z M135.401,385.599h-12.459
        c-0.332,0-0.575-0.215-0.593-0.523c-0.785-13.749-2.894-39.788-8.254-62.153c1.874-2.548,3.664-5.079,5.358-7.592
        c10.067,3.875,20.492,6.478,30.898,8.123C149.996,328.184,147.531,354.625,135.401,385.599z M409.49,385.599
        c-7.433-6.615-31.952-29.715-45.663-57.906c10.553-5.012,23.048-13.278,34.219-26.8c-0.065,14.816,0.777,57.794,11.904,84.706
        H409.49z M486.34,298.831c-2.63,3.944-7.352,6.007-12.031,5.258c-7.798-1.251-21.053-3.449-39.913-6.827
        c-13.374-2.396-23.491-10.209-30.069-23.224c-5.406-10.697-7.333-22.789-7.333-30.54c0-4.58-3.713-8.294-8.294-8.294
        c-4.58,0-8.294,3.713-8.294,8.294c0,10.424,2.619,25.906,10.142,39.772c-13.874,20.554-31.581,29.341-42.505,32.998
        c1.835-6.272,3.4-12.365,4.552-18.041c0.911-4.489-1.989-8.867-6.479-9.777c-4.485-0.908-8.867,1.989-9.777,6.479
        c-6.203,30.571-25.977,75.965-32.593,90.668h-7.283c-13.319-26.327-32.169-67.865-32.169-80.173c0-14.478,7.98-31.69,8.057-31.856
        c1.951-4.143,0.171-9.086-3.973-11.035c-4.146-1.953-9.086-0.171-11.035,3.973c-0.348,0.74-7.631,16.391-9.296,32.623
        c-14.284,5.133-71.864,18.804-119.755,1.783c5.461-9.914,9.432-19.512,11.873-28.757c1.17-4.429-1.472-8.967-5.901-10.137
        c-4.429-1.168-8.967,1.472-10.137,5.901c-13.256,50.184-77.613,102.408-89.579,111.767l-16.177-21.569
        c7.373-12.034,24.755-43.28,24.755-70.386c0-6.042-0.415-12.349-0.854-19.026c-1.873-28.471-3.998-60.74,25.006-90.158
        c19.239-19.514,40.501-33.715,63.195-42.207c24.469-9.157,51.478-12.003,80.28-8.463c65.543,8.058,112.583,25.873,113.047,26.051
        c1.397,0.536,2.911,0.682,4.383,0.43c34.521-5.969,53.122,3.269,57.674,5.989c-0.26,9.194,0.518,20.259,3.669,32.19
        c0.983,3.719,4.34,6.177,8.014,6.177c0.701,0,1.413-0.09,2.123-0.276c4.429-1.17,7.071-5.708,5.901-10.137
        c-4.311-16.317-3.364-30.886-1.999-39.675c23.398,11.435,29.907,34.026,30.209,35.116c1.194,4.407,5.727,7.023,10.142,5.844
        c2.188-0.583,3.935-1.99,5.002-3.799c33.962,25.37,44.226,85.992,46.168,99.922L486.34,298.831z"/>
    </g>
  </g>
  <g>
    <g>
      <path d="M465.002,236.864c-5.895,0-10.69,4.795-10.69,10.69c0.001,5.895,4.796,10.69,10.69,10.69c5.894,0,10.69-4.796,10.69-10.69
        C475.692,241.658,470.897,236.864,465.002,236.864z"/>
    </g>
  </g>
  </svg>
</center>

# Wombat
### Flat file, headless CMS for building configurable API
Simple open-source self-hosted Content Management Framework (headless-CMS) to powerful API with no effort.

## Features
- **Simple** - Designed to replace Wordpress in building simple company / product / event pages
- **Fast** - Build on top of Express.js and flat files
- **Lightweight** - Just 5 dependencies, no database or other system-wide requirements
- **Two types of data** - Unlike Contentful or Strapi, offers not only items collection but also single entities like pages or configs
- **Full internationalization** - Every piece content is assigned to one language, so you have complete freedom in customizing it
- **No strict schema** - Do you need each item within a content type to do be different and have a different structure for each language? No problem, sky is the limit!
- **No Admin Panel** - You are not limited by the UI or poor UX, just you and bunch of JSON and Markdown files
- **Front-end agnostic** - Simple REST API can be used by any application

## Setup
1. Create a new directory and initialize a JS project using `yarn init`
2. Add Wombat as a dependency `yarn add @snowdog/wombat`
3. Add a `script` in `package.json` to run Wombat
   ```json
    "scripts": {
      "start": "wombat"
    },
   ```
4. Create `/content/[languages]/(single|type)` and `/public` directories
5. (Optional) Create `conifg.json` file
6. Run `yarn start` to turn on the Wombat!

## Config options
* `defaultLang` (default `en`) - Fallback language when request is send without `lang` query param
* `port` (default `3000`) - Port used by the web server to listen for requests

## Content structure
All content is kept in `/content` directory.
Inside you need to define supported languages. For example, we want to have content just in English, so it will be `/content/en`.

Wombat supports two data types:
### Collections
Designed to store sets of similar data, like blog posts, authors, job offers etc.
- Collections are stored in `collection` directory inside each language.
- Each collection and item of collection needs to be added as a directory.
- Every property of an item collection needs to be a separate JSON or Markdown file.

### Entities
Created to keep a single object like a landing page content or global configuration object.
- Entities are stored in `entity` directory inside each language.
- Each entity needs to be added as a directory.
- Every property of entity needs to be a separate JSON or Markdown file.
- You can define the relation between entity and collection

### How to define a relation between entity and collection
Create new prop JSON file with relation config:
```json
{
  "collectionName": "collectionName", // required
  "filter": {
    "items": ["award", "about", "partner"], // (optional)
    "sortBy": "title", // (optional) if defined collection is returned as array
    "sort": "asc", // (optional) `desc` is default - `sortBy` required to use it
    "limit": 2 // (optional) - `sortBy` required to use it
  }
}
```

### Example content tree:
```
content
└── en
    ├── collection
    |   └── blog
    |       └── why-wombat-poop-is-cube
    |       |   ├── content.md
    |       |   ├── featured-image.json
    |       |   └── title.json
    |       └── things-you-dont-know-about-wombats
    |           ├── content.md
    |           ├── featured-image.json
    |           ├── form-config.json
    |           └── title.json
    └── entity
        └── home
            ├── blog-posts.json
            ├── about.md
            └── hero-banner.json
```
## API
### `/entity/{name}`
Retrieve an entity item

**Example:**
To get `home` send request to `/entity/home`

**URL params:**
- `lang` - return content in given lang

### `/collection/{name}`
Retrieve the whole collection as object

**Example:**
To get `blog` send request to `/collection/blog`

**URL params:**
- `lang` - return content in given lang
- `items` - list of coma separated IDs of collection items
- `sortBy` - Prop name used to sort collection. Collection will be returned as array.
- `sort` - Can be set to `asc`. `sortBy` required to use it.
- `limit` - Limit numer or returned collection items. `sortBy` required to use it.
